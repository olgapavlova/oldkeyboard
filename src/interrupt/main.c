#include <avr/io.h>
#include <avr/interrupt.h>

#define LED_PIN PD5  // –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π TX —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –Ω–∞ Pro Micro

ISR(TIMER1_OVF_vect) {
    // –ú–∏–≥–∞–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Ä–∞–∑ –≤ 4.19 —Å–µ–∫)
    PORTD ^= (1 << LED_PIN);
}

int main(void) {
    // üîí –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –≤—Å–µ–≥–æ –ª–∏—à–Ω–µ–≥–æ
    TIMSK1 = 0;
    TCCR1A = 0;
    TCCR1B = 0;
    TCNT1 = 0;

    ADCSRA = 0;
    ADCSRB = 0;
    EIMSK = 0;

    DDRB |= (1 << PB0);
    PORTB |= (1 << PB0);  // ‚Üê –¥–æ–ª–∂–µ–Ω –∑–∞–≥–æ—Ä–µ—Ç—å—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏

    // üí° –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º PD5 –∫–∞–∫ –≤—ã—Ö–æ–¥
    DDRD |= (1 << LED_PIN);
    PORTD &= ~(1 << LED_PIN);

    // ‚è± –¢–∞–π–º–µ—Ä 1: Normal mode + –¥–µ–ª–∏—Ç–µ–ª—å 1024
    TCCR1B = (1 << CS12) | (1 << CS10);  // clk/1024
    TIMSK1 |= (1 << TOIE1);             // –†–∞–∑—Ä–µ—à–∞–µ–º –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø–æ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—é

    // üöÄ –†–∞–∑—Ä–µ—à–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
    sei();

    // ‚è≥ –ñ–¥—ë–º –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
    while (1) {
        // –ø—É—Å—Ç–æ
    }
}
